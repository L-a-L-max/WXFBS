# ğŸ” æƒé™æ§åˆ¶è§„èŒƒ

> **ç›®æ ‡è¯»è€…**: éœ€è¦å®ç°èœå•ã€æŒ‰é’®ã€æ¥å£æƒé™æ§åˆ¶çš„å‰åç«¯å¼€å‘è€…  
> **æ–‡æ¡£ç”¨é€”**: åŸºäºè‹¥ä¾æ¡†æ¶çš„æƒé™ä½“ç³»ï¼Œè§„èŒƒæƒé™æ ‡è¯†å‘½åå’Œå®ç°æ–¹å¼  
> **æ›´æ–°æ—¥æœŸ**: 2025-12-28

---

## ğŸ“‹ ç›®å½•

### æ ¸å¿ƒè§„èŒƒ
- [æƒé™æ§åˆ¶ä½“ç³»](#-æƒé™æ§åˆ¶ä½“ç³»)
  - [1. æƒé™å±‚çº§](#1-æƒé™å±‚çº§)
  - [2. èœå•IDè§„åˆ’](#2-èœå•idè§„åˆ’)
  - [3. æƒé™æ ‡è¯†å‘½åè§„èŒƒ](#3-æƒé™æ ‡è¯†å‘½åè§„èŒƒ)
    - [ä¸šåŠ¡æ¨¡å—æƒé™æ ‡è¯†](#ä¸šåŠ¡æ¨¡å—æƒé™æ ‡è¯†)
    - [å¸¸ç”¨æ“ä½œåç¼€](#å¸¸ç”¨æ“ä½œåç¼€)

### ä»£ç ç¤ºä¾‹
- [å…¸å‹ä»£ç ç¤ºä¾‹å‚è€ƒ](#-å…¸å‹ä»£ç ç¤ºä¾‹å‚è€ƒ)
  - [ç³»ç»Ÿå†…ç½®ç¤ºä¾‹](#ç³»ç»Ÿå†…ç½®å®Œæ•´ç¤ºä¾‹æ¨èå­¦ä¹ )
  - [ä¸šåŠ¡æ¨¡å—ç¤ºä¾‹](#ä¸šåŠ¡æ¨¡å—ç¤ºä¾‹)
- [å®Œæ•´ä»£ç ç¤ºä¾‹](#-å®Œæ•´ä»£ç ç¤ºä¾‹æ¨èå­¦ä¹ )
  - [ç¤ºä¾‹ä¸€ï¼šç”¨æˆ·ç®¡ç†](#ç¤ºä¾‹ä¸€ç”¨æˆ·ç®¡ç†å®Œæ•´crudæƒé™æ§åˆ¶)
    - [åç«¯Controllerç¤ºä¾‹](#åç«¯controllerç¤ºä¾‹)
    - [å‰ç«¯Vueç»„ä»¶ç¤ºä¾‹](#å‰ç«¯vueç»„ä»¶ç¤ºä¾‹)
  - [ç¤ºä¾‹äºŒï¼šæ“ä½œæ—¥å¿—](#ç¤ºä¾‹äºŒæ“ä½œæ—¥å¿—æŸ¥è¯¢åˆ é™¤å¯¼å‡º)
    - [åç«¯Controllerç¤ºä¾‹](#åç«¯controllerç¤ºä¾‹-1)
    - [å‰ç«¯Vueç»„ä»¶ç¤ºä¾‹](#å‰ç«¯vueç»„ä»¶ç¤ºä¾‹-1)

### å®ç°æŒ‡å—
- [å‰ç«¯æƒé™æ§åˆ¶](#-å‰ç«¯æƒé™æ§åˆ¶)
  - [1. æŒ‰é’®æƒé™æŒ‡ä»¤](#1-æŒ‰é’®æƒé™æŒ‡ä»¤)
  - [2. èœå•æƒé™](#2-èœå•æƒé™)
  - [3. è·¯ç”±æƒé™](#3-è·¯ç”±æƒé™)
- [åç«¯æƒé™æ§åˆ¶](#-åç«¯æƒé™æ§åˆ¶)
  - [1. Controller æ³¨è§£](#1-controller-æ³¨è§£)
  - [2. æ•°æ®æƒé™](#2-æ•°æ®æƒé™)
  - [3. Service å±‚æƒé™](#3-service-å±‚æƒé™)

### å¼€å‘æµç¨‹
- [æƒé™é…ç½®æµç¨‹](#-æƒé™é…ç½®æµç¨‹)
  - [1. æ•°æ®åº“é…ç½®](#1-æ•°æ®åº“é…ç½®)
  - [2. åç«¯æ¥å£é…ç½®](#2-åç«¯æ¥å£é…ç½®)
  - [3. å‰ç«¯é¡µé¢é…ç½®](#3-å‰ç«¯é¡µé¢é…ç½®)
- [ç›®å½•ç»“æ„è§„èŒƒ](#-ç›®å½•ç»“æ„è§„èŒƒ)
  - [å‰ç«¯ç›®å½•ç»“æ„](#å‰ç«¯ç›®å½•ç»“æ„)
  - [åç«¯ç›®å½•ç»“æ„](#åç«¯ç›®å½•ç»“æ„)

### æµ‹è¯•éªŒè¯
- [æƒé™æµ‹è¯•æ¸…å•](#-æƒé™æµ‹è¯•æ¸…å•)
  - [1. é¡µé¢è®¿é—®æµ‹è¯•](#1-é¡µé¢è®¿é—®æµ‹è¯•)
  - [2. æŒ‰é’®æƒé™æµ‹è¯•](#2-æŒ‰é’®æƒé™æµ‹è¯•)
  - [3. æ¥å£æƒé™æµ‹è¯•](#3-æ¥å£æƒé™æµ‹è¯•)
  - [4. æ•°æ®æƒé™æµ‹è¯•](#4-æ•°æ®æƒé™æµ‹è¯•)

### é™„å½•
- [å‚è€ƒèµ„æ–™](#-å‚è€ƒèµ„æ–™)
- [ç›¸å…³æ–‡æ¡£](#-ç›¸å…³æ–‡æ¡£)

---

## ğŸ—ï¸ æƒé™æ§åˆ¶ä½“ç³»

### 1. æƒé™å±‚çº§

è‹¥ä¾æ¡†æ¶é‡‡ç”¨**å››çº§æƒé™ä½“ç³»**ï¼š

```
ä¸€çº§èœå•ï¼ˆç›®å½•ï¼‰
  â””â”€â”€ äºŒçº§èœå•ï¼ˆé¡µé¢ï¼‰
        â””â”€â”€ ä¸‰çº§èœå•ï¼ˆå­é¡µé¢ï¼‰
              â””â”€â”€ æŒ‰é’®æƒé™ï¼ˆæ“ä½œï¼‰
```

**æƒé™ç±»å‹è¯´æ˜ï¼š**

| æƒé™ç±»å‹ | menu_type | è¯´æ˜              | ç¤ºä¾‹ |
|---------|-----------|-----------------|------|
| **ç›®å½•** | M | ä¸€çº§èœå•ï¼Œéå¿…è¦ä¸ç»‘å®šå…·ä½“é¡µé¢ | å†…å®¹ç®¡ç†ã€ç³»ç»Ÿç®¡ç† |
| **èœå•** | C | äºŒçº§/ä¸‰çº§èœå•ï¼Œç»‘å®šå…·ä½“é¡µé¢  | æ—¥æ›´åŠ©æ‰‹ã€å‘å¸ƒè®°å½• |
| **æŒ‰é’®** | F | æŒ‰é’®çº§æƒé™ï¼Œæ§åˆ¶é¡µé¢å†…æ“ä½œ   | æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ |

---

### 2. èœå•IDè§„åˆ’

**ç»Ÿä¸€è§„åˆ’åŸåˆ™ï¼š**ä¸ºä¾¿äºåç»­æ‰©å±•å’Œç»´æŠ¤ï¼Œèœå•IDæŒ‰åŠŸèƒ½æ¨¡å—åˆ†æ®µè§„åˆ’ã€‚

| å±‚çº§ | IDèŒƒå›´ | è¯´æ˜ | ç¤ºä¾‹ |
|------|--------|------|------|
| **ä¸€çº§èœå•** | 1-99 | é¡¶çº§ç›®å½• | 1=å†…å®¹ç®¡ç†, 2=ç³»ç»Ÿç®¡ç† |
| **äºŒçº§èœå•** | 100-499 | åŠŸèƒ½é¡µé¢ | 100=ç”¨æˆ·ç®¡ç†, 117=æ—¥æ›´åŠ©æ‰‹ |
| **ä¸‰çº§èœå•** | 500-999 | å­é¡µé¢/å­åŠŸèƒ½ | 500=æ“ä½œæ—¥å¿—, 501=ç™»å½•æ—¥å¿— |
| **æŒ‰é’®æƒé™** | 1000+ | æŒ‰é’®çº§æ“ä½œ | 1000=ç”¨æˆ·æŸ¥è¯¢, 1061=æ–‡ç« æ–°å¢ |

**ä¸šåŠ¡æ¨¡å—IDåˆ†é…ï¼š**

```sql
-- ä¸€çº§èœå•ï¼š1-4ï¼ˆç³»ç»Ÿçº§ï¼‰
1    å†…å®¹ç®¡ç†
2    ç³»ç»Ÿç®¡ç†
3    ç³»ç»Ÿç›‘æ§
4    ç³»ç»Ÿå·¥å…·

-- äºŒçº§èœå•ï¼š100-116ï¼ˆç³»ç»Ÿçº§ï¼‰ï¼Œ118+ï¼ˆä¸šåŠ¡çº§ï¼‰
118  æ—¥æ›´åŠ©æ‰‹
119  å‘å¸ƒè®°å½•
...

-- ä¸‰çº§èœå•ï¼š500+
500  æ“ä½œæ—¥å¿—
501  ç™»å½•æ—¥å¿—
...

-- æŒ‰é’®æƒé™ï¼š1000+
1000-1060  ç³»ç»ŸæŒ‰é’®
1061-1080  æ—¥æ›´åŠ©æ‰‹æŒ‰é’®
1081-1100  å‘å¸ƒè®°å½•æŒ‰é’®
...
```

**ğŸ’¡ è¯´æ˜ï¼š** IDå¤§å°ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ç»Ÿä¸€è§„åˆ’ã€æ˜“äºæ¢³ç†å’Œç»´æŠ¤ã€‚

---

### 3. æƒé™æ ‡è¯†å‘½åè§„èŒƒ

**æ ¼å¼ï¼š** `æ¨¡å—:åŠŸèƒ½:æ“ä½œ`

#### ä¸šåŠ¡æ¨¡å—æƒé™æ ‡è¯†

| æ¨¡å— | å‰ç¼€ | ç¤ºä¾‹ |
|------|------|------|
| æ—¥æ›´åŠ©æ‰‹ | business:daily: | business:daily:add |
| å‘å¸ƒè®°å½• | business:publish: | business:publish:list |
| å…¬ä¼—å·ç®¡ç† | business:wechat: | business:wechat:config |
| ç³»ç»Ÿç®¡ç† | system: | system:user:add |
| ç›‘æ§ç®¡ç† | monitor: | monitor:online:list |

#### å¸¸ç”¨æ“ä½œåç¼€

| æ“ä½œ | æƒé™æ ‡è¯† | è¯´æ˜ |
|------|---------|------|
| **æŸ¥çœ‹** | :view | è¿›å…¥é¡µé¢ï¼ˆäºŒçº§èœå•ï¼‰ |
| **åˆ—è¡¨** | :list | æŸ¥è¯¢åˆ—è¡¨æ•°æ® |
| **æŸ¥è¯¢** | :query | æŸ¥è¯¢è¯¦æƒ… |
| **æ–°å¢** | :add | æ–°å¢æ•°æ® |
| **ä¿®æ”¹** | :edit | ä¿®æ”¹æ•°æ® |
| **åˆ é™¤** | :remove | åˆ é™¤æ•°æ® |
| **å¯¼å‡º** | :export | å¯¼å‡ºæ•°æ® |
| **å¯¼å…¥** | :import | å¯¼å…¥æ•°æ® |
| **é…ç½®** | :config | é…ç½®è®¾ç½® |
| **æ’ç‰ˆ** | :layout | æ™ºèƒ½æ’ç‰ˆ |
| **å‘å¸ƒ** | :publish | å‘å¸ƒåˆ°å…¬ä¼—å· |

**ç¤ºä¾‹ï¼š**

```sql
-- æ—¥æ›´åŠ©æ‰‹æƒé™æ ‡è¯†
business:daily:view      -- æŸ¥çœ‹é¡µé¢ï¼ˆäºŒçº§èœå•ï¼‰
business:daily:query     -- æŸ¥è¯¢æ–‡ç« åˆ—è¡¨
business:daily:add       -- æ–°å¢æ–‡ç« 
business:daily:remove    -- åˆ é™¤æ–‡ç« 
business:daily:config    -- æ™ºèƒ½ä½“é…ç½®
business:daily:layout    -- æ™ºèƒ½æ’ç‰ˆ
business:daily:publish   -- å‘å¸ƒå…¬ä¼—å·

-- å‘å¸ƒè®°å½•æƒé™æ ‡è¯†
business:publish:list    -- æŸ¥çœ‹é¡µé¢ï¼ˆäºŒçº§èœå•ï¼‰
business:publish:query   -- æŸ¥è¯¢è®°å½•è¯¦æƒ…
business:publish:remove  -- åˆ é™¤è®°å½•
```

---

## ğŸ“š å…¸å‹ä»£ç ç¤ºä¾‹å‚è€ƒ

#### ç³»ç»Ÿå†…ç½®å®Œæ•´ç¤ºä¾‹ï¼ˆæ¨èå­¦ä¹ ï¼‰

| æ¨¡å— | åç«¯Controller | å‰ç«¯Vueç»„ä»¶ | è¯´æ˜ |
|------|---------------|-------------|------|
| **ç”¨æˆ·ç®¡ç†** | `SysUserController.java` | `views/system/user/index.vue` | å®Œæ•´CRUD+æƒé™æ§åˆ¶ |
| **æ“ä½œæ—¥å¿—** | `SysOperlogController.java` | `views/monitor/operlog/index.vue` | æŸ¥è¯¢+åˆ é™¤+å¯¼å‡ºæƒé™ |
| **è§’è‰²ç®¡ç†** | `SysRoleController.java` | `views/system/role/index.vue` | å¤æ‚æƒé™åˆ†é… |
| **èœå•ç®¡ç†** | `SysMenuController.java` | `views/system/menu/index.vue` | æ ‘å½¢ç»“æ„æƒé™ |

#### ä¸šåŠ¡æ¨¡å—ç¤ºä¾‹

| æ¨¡å— | åç«¯Controller | å‰ç«¯Vueç»„ä»¶ | è¯´æ˜ |
|------|---------------|-------------|------|
| **å‘å¸ƒè®°å½•** | `WcOfficePublishRecordController.java` | `views/business/content/publishrecord/index.vue` | åªè¯»+åˆ é™¤æƒé™ |

---

## ğŸ¨ å‰ç«¯æƒé™æ§åˆ¶

**å‰ç«¯ä»£ç ä½ç½®ï¼š**
- é¡µé¢ç»„ä»¶ï¼š`WxFbsir-ui/src/views/business/`
- APIæ¥å£ï¼š`WxFbsir-ui/src/api/business/`

### 1. æŒ‰é’®æƒé™æŒ‡ä»¤

ä½¿ç”¨ `v-hasPermi` æŒ‡ä»¤æ§åˆ¶æŒ‰é’®æ˜¾ç¤ºï¼š

```vue
<template>
  <!-- âœ… æ­£ç¡®ï¼šä½¿ç”¨ v-hasPermi æŒ‡ä»¤ -->
  <el-button
    type="primary"
    icon="Plus"
    @click="handleAdd"
    v-hasPermi="['business:daily:add']"
  >
    æ–°å¢æ–‡ç« 
  </el-button>
  
  <el-button
    type="danger"
    icon="Delete"
    @click="handleDelete"
    v-hasPermi="['business:daily:remove']"
  >
    åˆ é™¤
  </el-button>
  
  <el-button
    type="warning"
    icon="Edit"
    @click="handleConfig"
    v-hasPermi="['business:daily:config']"
  >
    æ™ºèƒ½ä½“é…ç½®
  </el-button>
</template>
```

**æ“ä½œåˆ—æƒé™æ§åˆ¶ï¼š**

```vue
<template>
  <el-table-column label="æ“ä½œ" align="center" width="200">
    <template #default="scope">
      <!-- ç¼–è¾‘æŒ‰é’® -->
      <el-button
        link
        type="primary"
        icon="Edit"
        @click="handleEdit(scope.row)"
        v-hasPermi="['business:daily:edit']"
      >
        ç¼–è¾‘
      </el-button>
      
      <!-- åˆ é™¤æŒ‰é’® -->
      <el-button
        link
        type="danger"
        icon="Delete"
        @click="handleDelete(scope.row)"
        v-hasPermi="['business:daily:remove']"
      >
        åˆ é™¤
      </el-button>
    </template>
  </el-table-column>
</template>
```

**âŒ é”™è¯¯ç¤ºä¾‹ï¼š**

```vue
<!-- âŒ é”™è¯¯ï¼šä¸ä½¿ç”¨æƒé™æŒ‡ä»¤ï¼Œæ‰€æœ‰äººéƒ½èƒ½çœ‹åˆ°æŒ‰é’® -->
<el-button type="primary" @click="handleAdd">æ–°å¢</el-button>

<!-- âŒ é”™è¯¯ï¼šä½¿ç”¨ v-if æ‰‹åŠ¨åˆ¤æ–­ï¼Œä¸ç¬¦åˆè‹¥ä¾è§„èŒƒ -->
<el-button v-if="hasPermission" type="primary">æ–°å¢</el-button>
```

---

### 2. èœå•æƒé™

èœå•æƒé™é€šè¿‡åç«¯æ¥å£è¿”å›ï¼Œå‰ç«¯è‡ªåŠ¨è¿‡æ»¤ï¼š

**è·¯ç”±é…ç½®ï¼š**

```javascript
// router/index.js
{
  path: '/content',
  component: Layout,
  redirect: 'noRedirect',
  name: 'Content',
  meta: { 
    title: 'å†…å®¹ç®¡ç†', 
    icon: 'edit' 
  },
  children: [
    {
      path: 'daily-assistant',
      component: () => import('@/views/business/content/dailyassistant/index'),
      name: 'DailyAssistant',
      meta: { 
        title: 'æ—¥æ›´åŠ©æ‰‹', 
        icon: 'edit',
        perms: ['business:daily:view']  // âœ… æƒé™æ ‡è¯†
      }
    },
    {
      path: 'publish-record',
      component: () => import('@/views/business/content/publishrecord/index'),
      name: 'PublishRecord',
      meta: { 
        title: 'å‘å¸ƒè®°å½•', 
        icon: 'documentation',
        perms: ['business:publish:list']  // âœ… æƒé™æ ‡è¯†
      }
    }
  ]
}
```

---

### 3. è·¯ç”±æƒé™

å‰ç«¯è·¯ç”±å®ˆå«ä¼šè‡ªåŠ¨éªŒè¯æƒé™ï¼š

```javascript
// ç”¨æˆ·æƒé™åœ¨ç™»å½•æ—¶ä»åç«¯è·å–ï¼Œå­˜å‚¨åœ¨ Vuex ä¸­
// è·¯ç”±è·³è½¬æ—¶è‡ªåŠ¨éªŒè¯æƒé™
// æ— æƒé™æ—¶è‡ªåŠ¨è·³è½¬åˆ° 401 é¡µé¢

// æ— éœ€æ‰‹åŠ¨ç¼–å†™ä»£ç ï¼Œè‹¥ä¾æ¡†æ¶å·²é›†æˆ
```

---

## â˜• åç«¯æƒé™æ§åˆ¶

**åç«¯ä»£ç ä½ç½®ï¼š**
- ä¸šåŠ¡æ¨¡å—ï¼š`WxFbsir-business/src/main/java/com/wx/fbsir/business/`

### 1. Controller æ³¨è§£

ä½¿ç”¨ `@PreAuthorize` æ³¨è§£æ§åˆ¶æ¥å£æƒé™ï¼š

```java
@RestController
@RequestMapping("/business/daily-article")
public class DailyArticleController extends BaseController {
    
    /**
     * æŸ¥è¯¢æ–‡ç« åˆ—è¡¨
     */
    @PreAuthorize("@ss.hasPermi('business:daily:query')")
    @GetMapping("/list")
    public TableDataInfo list(DailyArticle dailyArticle) {
        startPage();
        List<DailyArticle> list = dailyArticleService.selectDailyArticleList(dailyArticle);
        return getDataTable(list);
    }
    
    /**
     * æ–°å¢æ–‡ç« 
     */
    @PreAuthorize("@ss.hasPermi('business:daily:add')")
    @PostMapping
    public AjaxResult add(@Validated @RequestBody DailyArticle dailyArticle) {
        dailyArticle.setUserId(getUserId());
        return toAjax(dailyArticleService.insertDailyArticle(dailyArticle));
    }
    
    /**
     * ä¿®æ”¹æ–‡ç« 
     */
    @PreAuthorize("@ss.hasPermi('business:daily:edit')")
    @PutMapping
    public AjaxResult edit(@Validated @RequestBody DailyArticle dailyArticle) {
        return toAjax(dailyArticleService.updateDailyArticle(dailyArticle));
    }
    
    /**
     * åˆ é™¤æ–‡ç« 
     */
    @PreAuthorize("@ss.hasPermi('business:daily:remove')")
    @DeleteMapping("/{ids}")
    public AjaxResult remove(@PathVariable Long[] ids) {
        return toAjax(dailyArticleService.deleteDailyArticleByIds(ids));
    }
    
    /**
     * æ™ºèƒ½ä½“é…ç½®
     */
    @PreAuthorize("@ss.hasPermi('business:daily:config')")
    @GetMapping("/config")
    public AjaxResult getConfig() {
        // ...
    }
    
    /**
     * æ™ºèƒ½æ’ç‰ˆ
     */
    @PreAuthorize("@ss.hasPermi('business:daily:layout')")
    @PostMapping("/layout")
    public AjaxResult layout(@RequestBody Map<String, String> params) {
        // ...
    }
    
    /**
     * å‘å¸ƒåˆ°å…¬ä¼—å·
     */
    @PreAuthorize("@ss.hasPermi('business:daily:publish')")
    @PostMapping("/publish")
    public AjaxResult publish(@RequestBody Map<String, Object> params) {
        // ...
    }
}
```

**âŒ é”™è¯¯ç¤ºä¾‹ï¼š**

```java
// âŒ é”™è¯¯ï¼šä¸æ·»åŠ æƒé™æ³¨è§£
@GetMapping("/list")
public TableDataInfo list(DailyArticle dailyArticle) {
    // ä»»ä½•äººéƒ½èƒ½è®¿é—®
}

// âŒ é”™è¯¯ï¼šä½¿ç”¨é”™è¯¯çš„æƒé™æ ‡è¯†
@PreAuthorize("@ss.hasPermi('daily:list')")  // ç¼ºå°‘æ¨¡å—å‰ç¼€
@GetMapping("/list")
public TableDataInfo list(DailyArticle dailyArticle) {
    // ...
}
```

---

### 2. æ•°æ®æƒé™

æ‰€æœ‰ä¸šåŠ¡æ•°æ®å¿…é¡»ç»‘å®šç”¨æˆ·IDï¼Œç¡®ä¿æ•°æ®éš”ç¦»ï¼š

```java
@Service
public class DailyArticleServiceImpl implements IDailyArticleService {
    
    @Autowired
    private DailyArticleMapper dailyArticleMapper;
    
    /**
     * æŸ¥è¯¢æ–‡ç« åˆ—è¡¨ï¼ˆè‡ªåŠ¨è¿‡æ»¤å½“å‰ç”¨æˆ·æ•°æ®ï¼‰
     */
    @Override
    public List<DailyArticle> selectDailyArticleList(DailyArticle dailyArticle) {
        // âœ… æ­£ç¡®ï¼šè‡ªåŠ¨æ³¨å…¥å½“å‰ç”¨æˆ·IDï¼Œç¡®ä¿æ•°æ®éš”ç¦»
        Long userId = SecurityUtils.getUserId();
        dailyArticle.setUserId(userId);
        return dailyArticleMapper.selectDailyArticleList(dailyArticle);
    }
    
    /**
     * åˆ é™¤æ–‡ç« 
     */
    @Override
    public int deleteDailyArticleByIds(Long[] ids) {
        Long userId = SecurityUtils.getUserId();
        
        // âœ… æ­£ç¡®ï¼šåˆ é™¤å‰éªŒè¯æ•°æ®æ‰€æœ‰æƒ
        for (Long id : ids) {
            DailyArticle article = dailyArticleMapper.selectDailyArticleById(id);
            if (article == null || !article.getUserId().equals(userId)) {
                throw new ServiceException("æ— æƒåˆ é™¤è¯¥æ–‡ç« ");
            }
        }
        
        return dailyArticleMapper.deleteDailyArticleByIds(ids);
    }
}
```

**âŒ é”™è¯¯ç¤ºä¾‹ï¼š**

```java
// âŒ é”™è¯¯ï¼šä¸éªŒè¯æ•°æ®æ‰€æœ‰æƒï¼Œç”¨æˆ·å¯ä»¥åˆ é™¤ä»–äººæ•°æ®
@Override
public int deleteDailyArticleByIds(Long[] ids) {
    return dailyArticleMapper.deleteDailyArticleByIds(ids);
}

// âŒ é”™è¯¯ï¼šä¸è¿‡æ»¤ç”¨æˆ·æ•°æ®ï¼Œå¯ä»¥æŸ¥è¯¢ä»–äººæ•°æ®
@Override
public List<DailyArticle> selectDailyArticleList(DailyArticle dailyArticle) {
    return dailyArticleMapper.selectDailyArticleList(dailyArticle);
}
```

---

### 3. Service å±‚æƒé™

Service å±‚ä¸éœ€è¦æƒé™æ³¨è§£ï¼Œç”± Controller å±‚æ§åˆ¶ï¼š

```java
// âœ… æ­£ç¡®ï¼šService å±‚ä¸“æ³¨ä¸šåŠ¡é€»è¾‘
@Service
public class DailyArticleServiceImpl implements IDailyArticleService {
    
    @Override
    public int insertDailyArticle(DailyArticle dailyArticle) {
        // ä¸šåŠ¡é€»è¾‘å¤„ç†
        dailyArticle.setCreateTime(DateUtils.getNowDate());
        return dailyArticleMapper.insertDailyArticle(dailyArticle);
    }
}

// âŒ é”™è¯¯ï¼šåœ¨ Service å±‚æ·»åŠ æƒé™æ³¨è§£ï¼ˆé‡å¤ä¸”æ— æ•ˆï¼‰
@Service
public class DailyArticleServiceImpl implements IDailyArticleService {
    
    @PreAuthorize("@ss.hasPermi('business:daily:add')")  // âŒ æ— æ•ˆ
    @Override
    public int insertDailyArticle(DailyArticle dailyArticle) {
        // ...
    }
}
```

---

## ğŸ”§ æƒé™é…ç½®æµç¨‹

### 1. æ•°æ®åº“é…ç½®

åœ¨ `sql/wxfbsir.sql` ä¸­æ·»åŠ èœå•å’Œæƒé™ï¼š

```sql
-- ç¬¬ä¸€æ­¥ï¼šæ·»åŠ äºŒçº§èœå•ï¼ˆé¡µé¢ï¼‰
insert into sys_menu values(
  '117',                          -- menu_idï¼šäºŒçº§èœå•ä»117å¼€å§‹
  'æ—¥æ›´åŠ©æ‰‹',                      -- menu_name
  '1',                            -- parent_idï¼šå†…å®¹ç®¡ç†
  '1',                            -- order_numï¼šæ’åº
  'daily-assistant',              -- pathï¼šè·¯ç”±è·¯å¾„
  'business/content/dailyassistant/index',  -- componentï¼šç»„ä»¶è·¯å¾„
  '', '',                         -- query, is_frame
  1, 0,                           -- visible, status
  'C',                            -- menu_typeï¼šC=èœå•
  '0', '0',                       -- is_cache, visible
  'business:daily:view',          -- permsï¼šæƒé™æ ‡è¯†
  'edit',                         -- icon
  'admin', sysdate(), '', null,
  'æ—¥æ›´åŠ©æ‰‹èœå•'                   -- remark
);

-- ç¬¬äºŒæ­¥ï¼šæ·»åŠ æŒ‰é’®æƒé™
insert into sys_menu values('1061', 'æ–‡ç« æŸ¥è¯¢', '117', '1', '#', '', '', '', 1, 0, 'F', '0', '0', 'business:daily:query',   '#', 'admin', sysdate(), '', null, '');
insert into sys_menu values('1062', 'æ–‡ç« æ–°å¢', '117', '2', '#', '', '', '', 1, 0, 'F', '0', '0', 'business:daily:add',     '#', 'admin', sysdate(), '', null, '');
insert into sys_menu values('1063', 'æ–‡ç« åˆ é™¤', '117', '3', '#', '', '', '', 1, 0, 'F', '0', '0', 'business:daily:remove',  '#', 'admin', sysdate(), '', null, '');
insert into sys_menu values('1064', 'æ™ºèƒ½ä½“é…ç½®', '117', '4', '#', '', '', '', 1, 0, 'F', '0', '0', 'business:daily:config',  '#', 'admin', sysdate(), '', null, '');
insert into sys_menu values('1065', 'æ™ºèƒ½æ’ç‰ˆ', '117', '5', '#', '', '', '', 1, 0, 'F', '0', '0', 'business:daily:layout',  '#', 'admin', sysdate(), '', null, '');
insert into sys_menu values('1066', 'å‘å¸ƒå…¬ä¼—å·', '117', '6', '#', '', '', '', 1, 0, 'F', '0', '0', 'business:daily:publish', '#', 'admin', sysdate(), '', null, '');

-- ç¬¬ä¸‰æ­¥ï¼šä¸ºè§’è‰²åˆ†é…æƒé™
insert into sys_role_menu values ('2', '117');   -- ç®¡ç†å‘˜è§’è‰²æ‹¥æœ‰æ—¥æ›´åŠ©æ‰‹è®¿é—®æƒ
insert into sys_role_menu values ('2', '1061');  -- æ–‡ç« æŸ¥è¯¢
insert into sys_role_menu values ('2', '1062');  -- æ–‡ç« æ–°å¢
insert into sys_role_menu values ('2', '1063');  -- æ–‡ç« åˆ é™¤
insert into sys_role_menu values ('2', '1064');  -- æ™ºèƒ½ä½“é…ç½®
insert into sys_role_menu values ('2', '1065');  -- æ™ºèƒ½æ’ç‰ˆ
insert into sys_role_menu values ('2', '1066');  -- å‘å¸ƒå…¬ä¼—å·
```

---

### 2. åç«¯æ¥å£é…ç½®

åœ¨ Controller ä¸­æ·»åŠ æƒé™æ³¨è§£ï¼š

```java
/**
 * æ—¥æ›´åŠ©æ‰‹æ–‡ç« æ§åˆ¶å™¨
 */
@RestController
@RequestMapping("/business/daily-article")
public class DailyArticleController extends BaseController {
    
    // æŸ¥è¯¢åˆ—è¡¨
    @PreAuthorize("@ss.hasPermi('business:daily:query')")
    @GetMapping("/list")
    public TableDataInfo list(DailyArticle dailyArticle) {
        // ...
    }
    
    // æ–°å¢æ–‡ç« 
    @PreAuthorize("@ss.hasPermi('business:daily:add')")
    @PostMapping
    public AjaxResult add(@RequestBody DailyArticle dailyArticle) {
        // ...
    }
    
    // åˆ é™¤æ–‡ç« 
    @PreAuthorize("@ss.hasPermi('business:daily:remove')")
    @DeleteMapping("/{ids}")
    public AjaxResult remove(@PathVariable Long[] ids) {
        // ...
    }
}
```

---

### 3. å‰ç«¯é¡µé¢é…ç½®

åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨æƒé™æŒ‡ä»¤ï¼š

```vue
<template>
  <div class="app-container">
    <!-- å·¥å…·æ æŒ‰é’® -->
    <el-row :gutter="10" class="mb8">
      <el-col :span="1.5">
        <el-button
          type="primary"
          icon="Plus"
          @click="handleAdd"
          v-hasPermi="['business:daily:add']"
        >
          æ–°å¢
        </el-button>
      </el-col>
      
      <el-col :span="1.5">
        <el-button
          type="danger"
          icon="Delete"
          @click="handleDelete"
          v-hasPermi="['business:daily:remove']"
        >
          åˆ é™¤
        </el-button>
      </el-col>
      
      <el-col :span="1.5">
        <el-button
          type="warning"
          icon="Setting"
          @click="handleConfig"
          v-hasPermi="['business:daily:config']"
        >
          æ™ºèƒ½ä½“é…ç½®
        </el-button>
      </el-col>
    </el-row>
    
    <!-- è¡¨æ ¼æ“ä½œåˆ— -->
    <el-table-column label="æ“ä½œ" width="200">
      <template #default="scope">
        <el-button
          link
          type="primary"
          @click="handleLayout(scope.row)"
          v-hasPermi="['business:daily:layout']"
        >
          æ™ºèƒ½æ’ç‰ˆ
        </el-button>
        
        <el-button
          link
          type="success"
          @click="handlePublish(scope.row)"
          v-hasPermi="['business:daily:publish']"
        >
          å‘å¸ƒ
        </el-button>
      </template>
    </el-table-column>
  </div>
</template>
```

---

## ğŸ“ ç›®å½•ç»“æ„è§„èŒƒ

### å‰ç«¯ç›®å½•ç»“æ„

```
WxFbsir-ui/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â””â”€â”€ business/              # ä¸šåŠ¡æ¨¡å—ï¼ˆå¿…é¡»ï¼‰
â”‚   â”‚       â””â”€â”€ content/           # å†…å®¹ç®¡ç†
â”‚   â”‚           â”œâ”€â”€ dailyassistant/     # æ—¥æ›´åŠ©æ‰‹
â”‚   â”‚           â”‚   â””â”€â”€ index.vue
â”‚   â”‚           â”œâ”€â”€ publishrecord/      # å‘å¸ƒè®°å½•
â”‚   â”‚           â”‚   â””â”€â”€ index.vue
â”‚   â”‚           â””â”€â”€ wechat/             # å…¬ä¼—å·ç®¡ç†ï¼ˆå‚è€ƒï¼‰
â”‚   â”‚               â””â”€â”€ index.vue
â”‚   â”‚
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ business/              # ä¸šåŠ¡APIï¼ˆå¿…é¡»ï¼‰
â”‚           â””â”€â”€ content/
â”‚               â”œâ”€â”€ dailyArticle.js     # æ—¥æ›´åŠ©æ‰‹API
â”‚               â”œâ”€â”€ publishRecord.js    # å‘å¸ƒè®°å½•API
â”‚               â””â”€â”€ yuanqiConfig.js     # æ™ºèƒ½ä½“é…ç½®API
```

### åç«¯ç›®å½•ç»“æ„

```
WxFbsir-business/
â””â”€â”€ src/main/java/com/wx/fbsir/business/
    â”œâ”€â”€ dailyassistant/            # æ—¥æ›´åŠ©æ‰‹æ¨¡å—ï¼ˆå¿…é¡»ï¼‰
    â”‚   â”œâ”€â”€ controller/
    â”‚   â”‚   â”œâ”€â”€ DailyArticleController.java
    â”‚   â”‚   â””â”€â”€ YuanqiAgentConfigController.java
    â”‚   â”œâ”€â”€ service/
    â”‚   â”‚   â”œâ”€â”€ IDailyArticleService.java
    â”‚   â”‚   â””â”€â”€ impl/
    â”‚   â”œâ”€â”€ mapper/
    â”‚   â”‚   â””â”€â”€ DailyArticleMapper.java
    â”‚   â””â”€â”€ domain/
    â”‚       â””â”€â”€ DailyArticle.java
    â”‚
    â””â”€â”€ officialaccount/           # å…¬ä¼—å·æ¨¡å—ï¼ˆå¿…é¡»ï¼‰
        â”œâ”€â”€ controller/
        â”‚   â”œâ”€â”€ WcOfficeAccountController.java
        â”‚   â””â”€â”€ WcOfficePublishRecordController.java
        â”œâ”€â”€ service/
        â””â”€â”€ mapper/
```

**âš ï¸ é‡è¦è§„èŒƒï¼š**
- âœ… æ‰€æœ‰ä¸šåŠ¡ä»£ç å¿…é¡»æ”¾åœ¨ `business` åŒ…ä¸‹
- âœ… å‰ç«¯é¡µé¢å¿…é¡»æ”¾åœ¨ `views/business` ç›®å½•ä¸‹
- âœ… å‰ç«¯APIå¿…é¡»æ”¾åœ¨ `api/business` ç›®å½•ä¸‹
- âŒ ç¦æ­¢åœ¨å…¶ä»–ä½ç½®å­˜æ”¾ä¸šåŠ¡ä»£ç ï¼ˆéœ€ä¸ç®¡ç†å‘˜ç¡®è®¤ï¼‰

---

## âœ… æƒé™æµ‹è¯•æ¸…å•

### 1. é¡µé¢è®¿é—®æµ‹è¯•

| æµ‹è¯•é¡¹ | æ“ä½œ | é¢„æœŸç»“æœ |
|--------|------|---------|
| æœ‰æƒé™ç”¨æˆ· | è®¿é—®æ—¥æ›´åŠ©æ‰‹é¡µé¢ | âœ… æ­£å¸¸æ˜¾ç¤º |
| æ— æƒé™ç”¨æˆ· | è®¿é—®æ—¥æ›´åŠ©æ‰‹é¡µé¢ | âŒ è·³è½¬åˆ°401é¡µé¢ |
| æœ‰æƒé™ç”¨æˆ· | èœå•æ æ˜¾ç¤º | âœ… æ˜¾ç¤ºæ—¥æ›´åŠ©æ‰‹èœå• |
| æ— æƒé™ç”¨æˆ· | èœå•æ æ˜¾ç¤º | âŒ ä¸æ˜¾ç¤ºæ—¥æ›´åŠ©æ‰‹èœå• |

### 2. æŒ‰é’®æƒé™æµ‹è¯•

| æµ‹è¯•é¡¹ | æ“ä½œ | é¢„æœŸç»“æœ |
|--------|------|---------|
| æœ‰æ–°å¢æƒé™ | æŸ¥çœ‹é¡µé¢ | âœ… æ˜¾ç¤º"æ–°å¢"æŒ‰é’® |
| æ— æ–°å¢æƒé™ | æŸ¥çœ‹é¡µé¢ | âŒ ä¸æ˜¾ç¤º"æ–°å¢"æŒ‰é’® |
| æœ‰åˆ é™¤æƒé™ | æ“ä½œåˆ— | âœ… æ˜¾ç¤º"åˆ é™¤"æŒ‰é’® |
| æ— åˆ é™¤æƒé™ | æ“ä½œåˆ— | âŒ ä¸æ˜¾ç¤º"åˆ é™¤"æŒ‰é’® |

### 3. æ¥å£æƒé™æµ‹è¯•

| æµ‹è¯•é¡¹ | æ“ä½œ | é¢„æœŸç»“æœ |
|--------|------|---------|
| æœ‰æƒé™ç”¨æˆ· | è°ƒç”¨æ–°å¢æ¥å£ | âœ… è¿”å›æˆåŠŸ |
| æ— æƒé™ç”¨æˆ· | è°ƒç”¨æ–°å¢æ¥å£ | âŒ è¿”å›403é”™è¯¯ |
| æœ‰æƒé™ç”¨æˆ· | åˆ é™¤è‡ªå·±çš„æ•°æ® | âœ… åˆ é™¤æˆåŠŸ |
| æœ‰æƒé™ç”¨æˆ· | åˆ é™¤ä»–äººçš„æ•°æ® | âŒ è¿”å›ä¸šåŠ¡å¼‚å¸¸ |

### 4. æ•°æ®æƒé™æµ‹è¯•

| æµ‹è¯•é¡¹ | æ“ä½œ | é¢„æœŸç»“æœ |
|--------|------|---------|
| ç”¨æˆ·A | æŸ¥è¯¢æ–‡ç« åˆ—è¡¨ | âœ… åªæ˜¾ç¤ºè‡ªå·±çš„æ–‡ç«  |
| ç”¨æˆ·A | æŸ¥çœ‹ç”¨æˆ·Bçš„æ–‡ç«  | âŒ æŸ¥è¯¢ä¸åˆ° |
| ç”¨æˆ·A | åˆ é™¤ç”¨æˆ·Bçš„æ–‡ç«  | âŒ æç¤ºæ— æƒåˆ é™¤ |

---

## ğŸ’» å®Œæ•´ä»£ç ç¤ºä¾‹ï¼ˆæ¨èå­¦ä¹ ï¼‰

### ç¤ºä¾‹ä¸€ï¼šç”¨æˆ·ç®¡ç†ï¼ˆå®Œæ•´CRUDæƒé™æ§åˆ¶ï¼‰

#### åç«¯Controllerç¤ºä¾‹

**æ–‡ä»¶è·¯å¾„ï¼š** `WxFbsir-admin/src/main/java/com/wx/fbsir/web/controller/system/SysUserController.java`

```java
@RestController
@RequestMapping("/system/user")
public class SysUserController extends BaseController {
    
    @Autowired
    private ISysUserService userService;
    
    /**
     * è·å–ç”¨æˆ·åˆ—è¡¨
     * æƒé™æ ‡è¯†ï¼šsystem:user:list
     */
    @PreAuthorize("@ss.hasPermi('system:user:list')")
    @GetMapping("/list")
    public TableDataInfo list(SysUser user) {
        startPage();
        List<SysUser> list = userService.selectUserList(user);
        return getDataTable(list);
    }
    
    /**
     * æ ¹æ®ç”¨æˆ·IDè·å–è¯¦ç»†ä¿¡æ¯
     * æƒé™æ ‡è¯†ï¼šsystem:user:query
     */
    @PreAuthorize("@ss.hasPermi('system:user:query')")
    @GetMapping(value = {"/{userId}"})
    public AjaxResult getInfo(@PathVariable Long userId) {
        userService.checkUserDataScope(userId);
        SysUser sysUser = userService.selectUserById(userId);
        AjaxResult ajax = AjaxResult.success();
        ajax.put(AjaxResult.DATA_TAG, sysUser);
        return ajax;
    }
    
    /**
     * æ–°å¢ç”¨æˆ·
     * æƒé™æ ‡è¯†ï¼šsystem:user:add
     */
    @PreAuthorize("@ss.hasPermi('system:user:add')")
    @Log(title = "ç”¨æˆ·ç®¡ç†", businessType = BusinessType.INSERT)
    @PostMapping
    public AjaxResult add(@Validated @RequestBody SysUser user) {
        if (!userService.checkUserNameUnique(user)) {
            return error("æ–°å¢ç”¨æˆ·'" + user.getUserName() + "'å¤±è´¥ï¼Œç™»å½•è´¦å·å·²å­˜åœ¨");
        }
        user.setCreateBy(getUsername());
        user.setPassword(SecurityUtils.encryptPassword(user.getPassword()));
        return toAjax(userService.insertUser(user));
    }
    
    /**
     * ä¿®æ”¹ç”¨æˆ·
     * æƒé™æ ‡è¯†ï¼šsystem:user:edit
     */
    @PreAuthorize("@ss.hasPermi('system:user:edit')")
    @Log(title = "ç”¨æˆ·ç®¡ç†", businessType = BusinessType.UPDATE)
    @PutMapping
    public AjaxResult edit(@Validated @RequestBody SysUser user) {
        userService.checkUserAllowed(user);
        userService.checkUserDataScope(user.getUserId());
        user.setUpdateBy(getUsername());
        return toAjax(userService.updateUser(user));
    }
    
    /**
     * åˆ é™¤ç”¨æˆ·
     * æƒé™æ ‡è¯†ï¼šsystem:user:remove
     */
    @PreAuthorize("@ss.hasPermi('system:user:remove')")
    @Log(title = "ç”¨æˆ·ç®¡ç†", businessType = BusinessType.DELETE)
    @DeleteMapping("/{userIds}")
    public AjaxResult remove(@PathVariable Long[] userIds) {
        if (ArrayUtils.contains(userIds, getUserId())) {
            return error("å½“å‰ç”¨æˆ·ä¸èƒ½åˆ é™¤");
        }
        return toAjax(userService.deleteUserByIds(userIds));
    }
    
    /**
     * å¯¼å‡ºç”¨æˆ·æ•°æ®
     * æƒé™æ ‡è¯†ï¼šsystem:user:export
     */
    @Log(title = "ç”¨æˆ·ç®¡ç†", businessType = BusinessType.EXPORT)
    @PreAuthorize("@ss.hasPermi('system:user:export')")
    @PostMapping("/export")
    public void export(HttpServletResponse response, SysUser user) {
        List<SysUser> list = userService.selectUserList(user);
        ExcelUtil<SysUser> util = new ExcelUtil<SysUser>(SysUser.class);
        util.exportExcel(response, list, "ç”¨æˆ·æ•°æ®");
    }
    
    /**
     * å¯¼å…¥ç”¨æˆ·æ•°æ®
     * æƒé™æ ‡è¯†ï¼šsystem:user:import
     */
    @Log(title = "ç”¨æˆ·ç®¡ç†", businessType = BusinessType.IMPORT)
    @PreAuthorize("@ss.hasPermi('system:user:import')")
    @PostMapping("/importData")
    public AjaxResult importData(MultipartFile file, boolean updateSupport) throws Exception {
        ExcelUtil<SysUser> util = new ExcelUtil<SysUser>(SysUser.class);
        List<SysUser> userList = util.importExcel(file.getInputStream());
        String message = userService.importUser(userList, updateSupport, getUsername());
        return success(message);
    }
    
    /**
     * é‡ç½®å¯†ç 
     * æƒé™æ ‡è¯†ï¼šsystem:user:resetPwd
     */
    @PreAuthorize("@ss.hasPermi('system:user:resetPwd')")
    @Log(title = "ç”¨æˆ·ç®¡ç†", businessType = BusinessType.UPDATE)
    @PutMapping("/resetPwd")
    public AjaxResult resetPwd(@RequestBody SysUser user) {
        userService.checkUserAllowed(user);
        userService.checkUserDataScope(user.getUserId());
        user.setPassword(SecurityUtils.encryptPassword(user.getPassword()));
        user.setUpdateBy(getUsername());
        return toAjax(userService.resetPwd(user));
    }
}
```

**å…³é”®ç‚¹è¯´æ˜ï¼š**
1. âœ… **æƒé™æ³¨è§£ï¼š** æ¯ä¸ªæ¥å£éƒ½ä½¿ç”¨ `@PreAuthorize("@ss.hasPermi('æƒé™æ ‡è¯†')")`
2. âœ… **æ—¥å¿—æ³¨è§£ï¼š** é‡è¦æ“ä½œä½¿ç”¨ `@Log` æ³¨è§£è®°å½•æ—¥å¿—
3. âœ… **æ•°æ®æ ¡éªŒï¼š** ä½¿ç”¨ `@Validated` éªŒè¯è¯·æ±‚å‚æ•°
4. âœ… **æ•°æ®æƒé™ï¼š** è°ƒç”¨ `checkUserDataScope` ç¡®ä¿ç”¨æˆ·åªèƒ½æ“ä½œè‡ªå·±æœ‰æƒé™çš„æ•°æ®

---

#### å‰ç«¯Vueç»„ä»¶ç¤ºä¾‹

**æ–‡ä»¶è·¯å¾„ï¼š** `WxFbsir-ui/src/views/system/user/index.vue`

```vue
<template>
  <div class="app-container">
    <!-- æŸ¥è¯¢è¡¨å• -->
    <el-form :model="queryParams" ref="queryRef" :inline="true">
      <el-form-item label="ç”¨æˆ·åç§°" prop="userName">
        <el-input v-model="queryParams.userName" placeholder="è¯·è¾“å…¥ç”¨æˆ·åç§°" clearable />
      </el-form-item>
      <el-form-item>
        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>
        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>
      </el-form-item>
    </el-form>

    <!-- å·¥å…·æ æŒ‰é’® -->
    <el-row :gutter="10" class="mb8">
      <el-col :span="1.5">
        <el-button
          type="primary"
          plain
          icon="Plus"
          @click="handleAdd"
          v-hasPermi="['system:user:add']"
        >æ–°å¢</el-button>
      </el-col>
      <el-col :span="1.5">
        <el-button
          type="success"
          plain
          icon="Edit"
          :disabled="single"
          @click="handleUpdate"
          v-hasPermi="['system:user:edit']"
        >ä¿®æ”¹</el-button>
      </el-col>
      <el-col :span="1.5">
        <el-button
          type="danger"
          plain
          icon="Delete"
          :disabled="multiple"
          @click="handleDelete"
          v-hasPermi="['system:user:remove']"
        >åˆ é™¤</el-button>
      </el-col>
      <el-col :span="1.5">
        <el-button
          type="info"
          plain
          icon="Upload"
          @click="handleImport"
          v-hasPermi="['system:user:import']"
        >å¯¼å…¥</el-button>
      </el-col>
      <el-col :span="1.5">
        <el-button
          type="warning"
          plain
          icon="Download"
          @click="handleExport"
          v-hasPermi="['system:user:export']"
        >å¯¼å‡º</el-button>
      </el-col>
    </el-row>

    <!-- æ•°æ®è¡¨æ ¼ -->
    <el-table v-loading="loading" :data="userList" @selection-change="handleSelectionChange">
      <el-table-column type="selection" width="50" align="center" />
      <el-table-column label="ç”¨æˆ·ç¼–å·" align="center" prop="userId" />
      <el-table-column label="ç”¨æˆ·åç§°" align="center" prop="userName" />
      <el-table-column label="ç”¨æˆ·æ˜µç§°" align="center" prop="nickName" />
      <el-table-column label="æ‰‹æœºå·ç " align="center" prop="phonenumber" />
      <el-table-column label="çŠ¶æ€" align="center" prop="status">
        <template #default="scope">
          <el-switch
            v-model="scope.row.status"
            active-value="0"
            inactive-value="1"
            @change="handleStatusChange(scope.row)"
          ></el-switch>
        </template>
      </el-table-column>
      
      <!-- æ“ä½œåˆ— -->
      <el-table-column label="æ“ä½œ" align="center" width="200" class-name="small-padding fixed-width">
        <template #default="scope">
          <el-tooltip content="ä¿®æ”¹" placement="top">
            <el-button
              link
              type="primary"
              icon="Edit"
              @click="handleUpdate(scope.row)"
              v-hasPermi="['system:user:edit']"
            ></el-button>
          </el-tooltip>
          <el-tooltip content="åˆ é™¤" placement="top">
            <el-button
              link
              type="primary"
              icon="Delete"
              @click="handleDelete(scope.row)"
              v-hasPermi="['system:user:remove']"
            ></el-button>
          </el-tooltip>
          <el-tooltip content="é‡ç½®å¯†ç " placement="top">
            <el-button
              link
              type="primary"
              icon="Key"
              @click="handleResetPwd(scope.row)"
              v-hasPermi="['system:user:resetPwd']"
            ></el-button>
          </el-tooltip>
        </template>
      </el-table-column>
    </el-table>
    
    <!-- åˆ†é¡µç»„ä»¶ -->
    <pagination
      v-show="total > 0"
      :total="total"
      v-model:page="queryParams.pageNum"
      v-model:limit="queryParams.pageSize"
      @pagination="getList"
    />
  </div>
</template>

<script setup name="User">
import { listUser, getUser, delUser, addUser, updateUser, resetUserPwd } from "@/api/system/user";

const { proxy } = getCurrentInstance();

const userList = ref([]);
const loading = ref(true);
const total = ref(0);
const single = ref(true);
const multiple = ref(true);

const queryParams = ref({
  pageNum: 1,
  pageSize: 10,
  userName: undefined,
  phonenumber: undefined,
  status: undefined
});

/** æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ */
function getList() {
  loading.value = true;
  listUser(queryParams.value).then(response => {
    userList.value = response.rows;
    total.value = response.total;
    loading.value = false;
  });
}

/** æœç´¢æŒ‰é’®æ“ä½œ */
function handleQuery() {
  queryParams.value.pageNum = 1;
  getList();
}

/** é‡ç½®æŒ‰é’®æ“ä½œ */
function resetQuery() {
  proxy.resetForm("queryRef");
  handleQuery();
}

/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */
function handleSelectionChange(selection) {
  single.value = selection.length != 1;
  multiple.value = !selection.length;
}

/** æ–°å¢æŒ‰é’®æ“ä½œ */
function handleAdd() {
  // æ‰“å¼€æ–°å¢å¯¹è¯æ¡†
}

/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */
function handleUpdate(row) {
  // æ‰“å¼€ä¿®æ”¹å¯¹è¯æ¡†
}

/** åˆ é™¤æŒ‰é’®æ“ä½œ */
function handleDelete(row) {
  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤ç”¨æˆ·ç¼–å·ä¸º"' + row.userId + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(() => {
    return delUser(row.userId);
  }).then(() => {
    getList();
    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");
  });
}

/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */
function handleExport() {
  proxy.download('system/user/export', {
    ...queryParams.value
  }, `user_${new Date().getTime()}.xlsx`);
}

// åˆå§‹åŒ–åŠ è½½æ•°æ®
getList();
</script>
```

**å…³é”®ç‚¹è¯´æ˜ï¼š**
1. âœ… **v-hasPermiæŒ‡ä»¤ï¼š** æ‰€æœ‰æŒ‰é’®éƒ½ä½¿ç”¨ `v-hasPermi="['æƒé™æ ‡è¯†']"` æ§åˆ¶æ˜¾ç¤º
2. âœ… **æ“ä½œåˆ—æƒé™ï¼š** è¡¨æ ¼æ“ä½œåˆ—çš„æ¯ä¸ªæŒ‰é’®éƒ½ç‹¬ç«‹æ§åˆ¶æƒé™
3. âœ… **çŠ¶æ€ç®¡ç†ï¼š** ä½¿ç”¨ `single` å’Œ `multiple` æ§åˆ¶æŒ‰é’®ç¦ç”¨çŠ¶æ€
4. âœ… **APIè°ƒç”¨ï¼š** é€šè¿‡APIæ¥å£ä¸åç«¯äº¤äº’

---

### ç¤ºä¾‹äºŒï¼šæ“ä½œæ—¥å¿—ï¼ˆæŸ¥è¯¢+åˆ é™¤+å¯¼å‡ºï¼‰

#### åç«¯Controllerç¤ºä¾‹

**æ–‡ä»¶è·¯å¾„ï¼š** `WxFbsir-admin/src/main/java/com/wx/fbsir/web/controller/monitor/SysOperlogController.java`

```java
@RestController
@RequestMapping("/monitor/operlog")
public class SysOperlogController extends BaseController {
    
    @Autowired
    private ISysOperLogService operLogService;

    /**
     * è·å–æ“ä½œæ—¥å¿—åˆ—è¡¨
     * æƒé™æ ‡è¯†ï¼šmonitor:operlog:list
     */
    @PreAuthorize("@ss.hasPermi('monitor:operlog:list')")
    @GetMapping("/list")
    public TableDataInfo list(SysOperLog operLog) {
        startPage();
        List<SysOperLog> list = operLogService.selectOperLogList(operLog);
        return getDataTable(list);
    }

    /**
     * å¯¼å‡ºæ“ä½œæ—¥å¿—
     * æƒé™æ ‡è¯†ï¼šmonitor:operlog:export
     */
    @Log(title = "æ“ä½œæ—¥å¿—", businessType = BusinessType.EXPORT)
    @PreAuthorize("@ss.hasPermi('monitor:operlog:export')")
    @PostMapping("/export")
    public void export(HttpServletResponse response, SysOperLog operLog) {
        List<SysOperLog> list = operLogService.selectOperLogList(operLog);
        ExcelUtil<SysOperLog> util = new ExcelUtil<SysOperLog>(SysOperLog.class);
        util.exportExcel(response, list, "æ“ä½œæ—¥å¿—");
    }

    /**
     * åˆ é™¤æ“ä½œæ—¥å¿—
     * æƒé™æ ‡è¯†ï¼šmonitor:operlog:remove
     */
    @Log(title = "æ“ä½œæ—¥å¿—", businessType = BusinessType.DELETE)
    @PreAuthorize("@ss.hasPermi('monitor:operlog:remove')")
    @DeleteMapping("/{operIds}")
    public AjaxResult remove(@PathVariable Long[] operIds) {
        return toAjax(operLogService.deleteOperLogByIds(operIds));
    }

    /**
     * æ¸…ç©ºæ“ä½œæ—¥å¿—
     * æƒé™æ ‡è¯†ï¼šmonitor:operlog:remove
     */
    @Log(title = "æ“ä½œæ—¥å¿—", businessType = BusinessType.CLEAN)
    @PreAuthorize("@ss.hasPermi('monitor:operlog:remove')")
    @DeleteMapping("/clean")
    public AjaxResult clean() {
        operLogService.cleanOperLog();
        return success();
    }
}
```

---

#### å‰ç«¯Vueç»„ä»¶ç¤ºä¾‹

**æ–‡ä»¶è·¯å¾„ï¼š** `WxFbsir-ui/src/views/monitor/operlog/index.vue`

```vue
<template>
   <div class="app-container">
      <!-- æŸ¥è¯¢è¡¨å• -->
      <el-form :model="queryParams" ref="queryRef" :inline="true">
         <el-form-item label="ç³»ç»Ÿæ¨¡å—" prop="title">
            <el-input v-model="queryParams.title" placeholder="è¯·è¾“å…¥ç³»ç»Ÿæ¨¡å—" clearable />
         </el-form-item>
         <el-form-item label="æ“ä½œäººå‘˜" prop="operName">
            <el-input v-model="queryParams.operName" placeholder="è¯·è¾“å…¥æ“ä½œäººå‘˜" clearable />
         </el-form-item>
         <el-form-item>
            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>
            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>
         </el-form-item>
      </el-form>

      <!-- å·¥å…·æ  -->
      <el-row :gutter="10" class="mb8">
         <el-col :span="1.5">
            <el-button
               type="danger"
               plain
               icon="Delete"
               :disabled="multiple"
               @click="handleDelete"
               v-hasPermi="['monitor:operlog:remove']"
            >åˆ é™¤</el-button>
         </el-col>
         <el-col :span="1.5">
            <el-button
               type="danger"
               plain
               icon="Delete"
               @click="handleClean"
               v-hasPermi="['monitor:operlog:remove']"
            >æ¸…ç©º</el-button>
         </el-col>
         <el-col :span="1.5">
            <el-button
               type="warning"
               plain
               icon="Download"
               @click="handleExport"
               v-hasPermi="['monitor:operlog:export']"
            >å¯¼å‡º</el-button>
         </el-col>
      </el-row>

      <!-- æ•°æ®è¡¨æ ¼ -->
      <el-table v-loading="loading" :data="operlogList" @selection-change="handleSelectionChange">
         <el-table-column type="selection" width="50" align="center" />
         <el-table-column label="æ—¥å¿—ç¼–å·" align="center" prop="operId" />
         <el-table-column label="ç³»ç»Ÿæ¨¡å—" align="center" prop="title" />
         <el-table-column label="æ“ä½œç±»å‹" align="center" prop="businessType">
            <template #default="scope">
               <dict-tag :options="sys_oper_type" :value="scope.row.businessType" />
            </template>
         </el-table-column>
         <el-table-column label="æ“ä½œäººå‘˜" align="center" prop="operName" />
         <el-table-column label="æ“ä½œåœ°å€" align="center" prop="operIp" />
         <el-table-column label="æ“ä½œçŠ¶æ€" align="center" prop="status">
            <template #default="scope">
               <dict-tag :options="sys_common_status" :value="scope.row.status" />
            </template>
         </el-table-column>
         <el-table-column label="æ“ä½œæ—¥æœŸ" align="center" prop="operTime" width="180">
            <template #default="scope">
               <span>{{ parseTime(scope.row.operTime) }}</span>
            </template>
         </el-table-column>
      </el-table>
      
      <!-- åˆ†é¡µ -->
      <pagination
         v-show="total > 0"
         :total="total"
         v-model:page="queryParams.pageNum"
         v-model:limit="queryParams.pageSize"
         @pagination="getList"
      />
   </div>
</template>

<script setup name="Operlog">
import { list, delOperlog, cleanOperlog } from "@/api/monitor/operlog";

const { proxy } = getCurrentInstance();

const operlogList = ref([]);
const loading = ref(true);
const total = ref(0);
const multiple = ref(true);

const queryParams = ref({
  pageNum: 1,
  pageSize: 10,
  title: undefined,
  operName: undefined
});

/** æŸ¥è¯¢æ“ä½œæ—¥å¿—åˆ—è¡¨ */
function getList() {
  loading.value = true;
  list(queryParams.value).then(response => {
    operlogList.value = response.rows;
    total.value = response.total;
    loading.value = false;
  });
}

/** åˆ é™¤æŒ‰é’®æ“ä½œ */
function handleDelete(row) {
  const operIds = row.operId || ids.value;
  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤æ—¥å¿—ç¼–å·ä¸º"' + operIds + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(() => {
    return delOperlog(operIds);
  }).then(() => {
    getList();
    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");
  });
}

/** æ¸…ç©ºæŒ‰é’®æ“ä½œ */
function handleClean() {
  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤æ¸…ç©ºæ‰€æœ‰æ“ä½œæ—¥å¿—æ•°æ®é¡¹ï¼Ÿ').then(() => {
    return cleanOperlog();
  }).then(() => {
    getList();
    proxy.$modal.msgSuccess("æ¸…ç©ºæˆåŠŸ");
  });
}

/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */
function handleExport() {
  proxy.download('monitor/operlog/export', {
    ...queryParams.value
  }, `operlog_${new Date().getTime()}.xlsx`);
}

// åˆå§‹åŒ–
getList();
</script>
```

**å…³é”®ç‚¹è¯´æ˜ï¼š**
1. âœ… **ç®€åŒ–æƒé™æ§åˆ¶ï¼š** åªæœ‰æŸ¥è¯¢ã€åˆ é™¤ã€å¯¼å‡ºä¸‰ä¸ªæƒé™
2. âœ… **æŒ‰é’®ç¦ç”¨é€»è¾‘ï¼š** åˆ é™¤æŒ‰é’®æ ¹æ®æ˜¯å¦é€‰ä¸­æ•°æ®ç¦ç”¨
3. âœ… **ç¡®è®¤å¯¹è¯æ¡†ï¼š** åˆ é™¤å’Œæ¸…ç©ºæ“ä½œä½¿ç”¨ç¡®è®¤å¯¹è¯æ¡†

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [è‹¥ä¾æƒé™æ§åˆ¶æ–‡æ¡£](http://doc.ruoyi.vip/ruoyi-vue/document/spjc.html#æƒé™æ§åˆ¶)
- [Spring Security æ³¨è§£](https://docs.spring.io/spring-security/reference/servlet/authorization/method-security.html)
- [Vue æŒ‡ä»¤ä½¿ç”¨](https://cn.vuejs.org/guide/reusability/custom-directives.html)

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- **[ä»£ç è§„èŒƒ](./ä»£ç è§„èŒƒ.md)** - é¡¹ç›®ä»£ç ç¼–å†™è§„èŒƒ
- **[åŠŸèƒ½è¯´æ˜](./åŠŸèƒ½è¯´æ˜/)** - å„æ¨¡å—åŠŸèƒ½è¯¦ç»†è¯´æ˜
- **[æ•°æ®åº“è®¾è®¡](../sql/wxfbsir.sql)** - æ•°æ®åº“è¡¨ç»“æ„å’Œæƒé™é…ç½®

---


---

**æœ€åæ›´æ–°**: 2025-12-28
**ç»´æŠ¤è€…**: WxFbsir Team
